\documentclass[../book/calcnotes.tex]{subfiles}

\begin{document}
\section{Derivatives as functions}
\label{sec:derivs-as-functions}

The notion of \emph{derivative}, introduced in \cref{def:deriv}, gives us an analytic tool for studying the slopes of tangent lines to curves.
In particular, given a function $f$ and a value $x = a$, we now have a way to find the slope of the tangent line to the curve $y = f(x)$ at $x = a$.
Of course, the result can depend on the value of $a$ as well as on the function $f$, so in fact the derivative is a \emph{function} which is \enquote{derived from}\footnote{This is, in fact, the origin of the term \enquote{derivative}.} $f$.
We'll record this idea in a definition.

\begin{definition}
  \label{def:deriv.func}
  Fix a function $f$.
  The \defterm{derivative function of $f$}[derivative!as a function] (or \defterm{derivative of $f$}[] for short) is the function $f'$ (read \enquote{$f$ prime}) given by
  \begin{equation}
    \label{eq:deriv.func}
    f'(x) = \lim_{\Delta x \to 0} \frac{f \pbrac{x + \Delta x} - f \pbrac{x}}{\Delta x}
  \end{equation}
  wherever the limit exists.
  If $f'$ exists on some region $I$, we say that $f$ is \defterm{differentiable on $I$}[differentiable function]; if $f'$ exists on the whole domain of $f$, we say that $f$ is \defterm{differentiable}[differentiable function].
  For convenience, we will sometimes denote\footnotemark the derivative of $f$ by $\D{f}{x}$ or $\D{}{x} f$ instead of $f'$.
\end{definition}

\footnotetext{
  The \enquote{prime notation} $f'$ comes from Italian mathematician Joseph-Louis Lagrange; the \enquote{differential notation} $\D{f}{x}$ or $\D{}{x} f$ comes from German mathematician Gottfreid Leibniz.
  We will use them both throughout the text.
  Newton used a \enquote{dot notation} $\dot{f}$, but this is now rarely used outside a few scientific settings.
}

If we can find the derivative of a given function $f$, there will be an immediate payoff: we'll have calculated the slopes of \emph{all} the tangent lines to $y = f(x)$ at once!
In many cases, we'll need special techniques and careful analysis to find the derivatives of functions (which will occupy us for the rest of \cref{sec:derivative-theory}), but there are some functions we can tackle directly.

\begin{example}
  \label{ex:derivative.quadratic.function}
  Find the derivative of $f(x) = x^{2}$.
  Use the result to find the tangent line to $y = x^{2}$ at $x = 1$, $x = 2$, and $x = -3$.
\end{example}

\begin{soln}
  Recall that we already computed $f'(1)$ in \cref{ex:derivative.quadratic.onepoint}.
  To find $f'(x)$ as a function of $x$, we only need to retrace our steps, using $x$ instead of the specific value $x = 1$.
  By \cref{def:deriv.func}, the derivative is
  \begin{align*}
    f'(x)
    &= \lim_{\Delta x \to 0} \frac{\pbrac*{x + \Delta x}^{2} - \pbrac{x}^{2}}{\Delta x} \\
    &= \lim_{\Delta x \to 0} \frac{x^{2} + 2 x \Delta x + \pbrac*{\Delta x}^{2} - x^{2}}{\Delta x} \\
    &= \lim_{\Delta x \to 0} \frac{2 x \Delta x + \pbrac*{\Delta x}^{2}}{\Delta x} \\
    &= \lim_{\Delta x \to 0} 2 x + \Delta x = 2x.
  \end{align*}
  In differential notation, this result is
  \begin{equation*}
    \D{}{x} x^{2} = 2x.
  \end{equation*}
  We can translate this directly into tangent line information.
  At $x = 1$, the tangent line has slope $f'(1) = 2$; at $x = 2$, the tangent line has slope $f'(2) = 4$; and at $x = 3$, the tangent line has slope $f'(-3) = -6$.
  By \cref{thm:derivtan}, the tangent lines then have the following equations:
  \begin{gather*}
    y = f(1) + f'(1) \pbrac{x - 1} = 1 + 2 \pbrac{x - 1} \tag{x = 1} \\
    y = f(2) + f'(2) \pbrac{x - 2} = 4 + 4 \pbrac{x - 2} \tag{x = 2} \\
    y = f(-3) + f'(-3) \pbrac{x - -3} = 9 - 6 \pbrac{x + 3} \tag{x = -3}
  \end{gather*}
\end{soln}

This is our first application of the idea of a derivative function: for a given function $f$, the derivative function $f'$ tells us the slopes of \emph{all} the tangent lines to $y = f(x)$ at once!

\subsection{Rates of change}
\label{sec:deriv.roc}

All of this is great if, like the analytic geometers of sixteenth-century Europe, we want to draw tangent lines to curves.
However, we should take a moment to consider whether the concept of the derivative is of any other use.

Suppose, for example, that an object is moving back and forth in a straight line such that its position at time $t$ (in \si{\second}) is $x(t)$ (in \si{\meter}).
What does the number $x' \pbrac{1}$ measure?
Of course, we've already given one interpretation: it's the slope of the tangent line to\footnote{Note that this is a line in the $y$-$t$ plane! $x$ is the name of a \emph{function} here.} $y = x(t)$ at $t = 1$.
But does it tell us anything about the motion of the object itself?

In light of \cref{def:deriv}, we know that
\begin{equation*}
  x'(1) = \lim_{\Delta t \to 0} \frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}.
\end{equation*}
Let's disregard the limit for a moment and consider the numbers $\frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}$ for small (but non-zero!) values of $\Delta t$.
When $\Delta t = \SI{0.5}{\second}$, for example, this number is $\frac{x \pbrac*{\SI{1.5}{\second}} - x \pbrac*{\SI{1}{\second}}}{\SI{0.5}{\second}}$.
Without knowing more about the function $x$, of course, we can't calculate what number this is, but we can certainly say something about what it \emph{measures}: it's the average velocity of the object (in \si{\meter\per\second}) over the time interval $t \in \closedint{\SI{1}{\second}, \SI{1.5}{\second}}$!
Indeed, for any nonzero $\Delta t$ we choose, the number $\frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}$ measures the average velocity of the object over the interval $t \in \closedint{\SI{1}{\second}, \pbrac*{1 + \Delta t} \si{\second}}$.
There's nothing special about the number $1$, of course, so this leads us to a general result: \emph{the derivative of a position function is a velocity function.}

In fact, we can generalize this interpretation far beyond mechanical motion.
Any time we are interested in the values of a function $f$, the values of the derivative function $f'$ measure the \emph{rate of change} of the values of $f$ with respect to the independent variable.
Here's just a few examples:

\begin{itemize}
\item
  If a cup of coffee set on a counter has temperature $T$ (in \si{\celsius}) at time $t$ (in \si{\minute}), the derivative $T'(t)$ measures the rate at which the coffee cools (in \si{\celsius\per\minute}).

\item
  If your browser has downloaded $S$ bytes of a file after $t$ seconds, the derivative $S'(t)$ measures the download throughput (in \si{\byte\per\second}).

\item
  If the cost of manufacturing $n$ computers is $C(n)$ U.S.~dollars, then $C'(n)$ is the \emph{marginal cost}, which measures the cost of producing a single computer given that $n$ have already been produced.
  (Notice that the independent variable doesn't have to be time!)

\item
  The pressure $P$ (in \si{\pascal}) on a diver is a function of the depth $d$ (in \si{\meter}) of the dive.
  The derivative $P'(d)$ measures how quickly the pressure increases as the diver descends.
\end{itemize}

This idea connects calculus to essentially every quantitative science, because it implies that differentiation is relevant to the study of anything that changes!
We'll revisit this idea down the road once we know how to find the derivatives of more functions.

\subsection{Geometry and the sign of the derivative}
\label{sec:deriv.sign}

Suppose that we're examining a function $f$ which is differentiable on $\closedint{a, b}$ and that $f'(x) = 0$ for all $x \in \closedint{a, b}$.
What does this tell us about the function?
By definition, it means that all the tangent lines to $y = f(x)$ on this interval have zero slope---that is, that they are horizontal.
In other words, the function's rate of change is $0$ at every point.
We saw in \cref{thm:deriv.const} that constant functions have this property.
In fact, any function with this property \emph{must}\footnote{
  To prove this, we would need a surprisingly fiddly technical result called the \enquote{Mean Value Theorem}, which in turn depends on some important technical properties of the real numbers.
}
be constant!

What about the case that $f(x) > 0$ over the interval?
In this case, the tangent lines to $y = f(x)$ have positive slope, and the function's rate of change is positive at every point.
This means that the function $f$ must be \emph{increasing}.
Similarly, if $f(x) < 0$ over the interval, $f$ must be \emph{decreasing}.

Let's record these results for future reference.
\begin{theorem}[Derivative sign theorem]
  \label{thm:deriv.sign}
  Let $f$ be a function which is differentiable on an interval $I = \closedint{a, b}$.
  \begin{itemize}
  \item
    If $f'(x) = 0$ for all $x \in I$, $f$ is constant on $I$.

  \item
    If $f'(x) > 0$ for all $x \in I$, $f$ is increasing on $I$.

  \item
    If $f'(x) < 0$ for all $x \in I$, $f$ is decreasing on $I$.
  \end{itemize}
\end{theorem}

\subsection{Extreme values}
\label{sec:deriv.extrema}

In many applications (such as those in \cref{sec:optimization}, we'll be interested in finding places where a function takes on a maximum or minimum value.
As a first step in this process, we'll define so-called \enquote{local} extrema\footnote{
  \enquote{Extrema} is the plural of \enquote{extreme}, and refers to both maximum and minimum values (the plurals of which are \enquote{maxima} and \enquote{minima} respectively).
}---places where the function takes on its largest or smallest value \emph{in some region}.
Local maxima and minima of a function are illustrated in \cref{fig:local-extrema}.

\begin{smallfig}
  \begin{asy}
    smallsize();

    real f(real x) {return 1 + abs(x)*cos(x);}

    real start=-.75, end=1.5;

    pair a = (0, f(0));
    pair b = (0.86, f(0.86));

    xaxis("$x$", start, end, Arrow);
    yaxis("$y$", 0, Arrow);

    funcplot(f, start, end);

    dot(a);
    dot(b);
    arrow("min", a, SE);
    arrow("max", b, NE);
  \end{asy}
  \caption{A function with a local max and a local min}
  \label{fig:local-extrema}
\end{smallfig}

Let's define this formally so we have a solid place to stand.

\begin{definition}
  \label{def:local-extrema}
  Let $f$ be a function and $p$ be a point in the domain of $f$.
  Then $f$ has a \defterm{local minimum at $p$}[local extrema!minimum] if $f(p) \leq f(x)$ for all values of $x$ sufficiently close to $p$, and $f$ has a \defterm{local maximum at $p$}[local extrema!maximum] if $f(p) \geq f(x)$ for all values of $x$ sufficiently close to $p$.
  If $p$ is either a local minimum or local maximum of $f$, we say $p$ is a \defterm{local extremum of $f$}[local extrema].
\end{definition}

What does this have to do with calculus?
Let's take a closer look at a point where a function has a local extreme, as shown in \cref{fig:local-extrema}.
Between the shown minimum and the maximum, the function $f$ is increasing; before the minimum and after the maximum, it is decreasing.
Right at each extremum, however, $f$ is neither increasing nor decreasing!
At the maximum, the curve $y = f(x)$ has a horizontal tangent line, and at the minimum it has no tangent line at all, as discussed in \cref{gp:deriv.abs}.

In fact, an extremum of $f$ can \emph{only} occur under these circumstances---either $f'(x) = 0$ or $f'(x)$ is undefined at every local extreme $x$.
To see why, consider some point $x$ for which $f'(x)$ is defined but nonzero.
If $f'(x) > 0$, $f$ is increasing at $x$, so the values of $f$ to the left of $x$ are less and the values to the right are greater.
Similarly, if $f'(x) < 0$, $f$ is decreasing at $x$, so the values of $f$ to the left of $x$ are greater and the values to the right are less.
In either case, $f$ clearly doesn't have an extremum at $x$!

To record this in formal language, we should first give a name to these kinds of points.

\begin{definition}
  \label{def:critical-points}
  Let $f$ be a function and $p$ be a point in the domain of $f$.
  Then $p$ is a \defterm{critical point of $f$}[critical point] if either $f'(p) = 0$ or $f'(p)$ is undefined.
\end{definition}

With this definition in hand, we can state our observation as a theorem.
This theorem is often attributed to French mathematician Pierre de Fermat, whose work helped form the foundation for the development of calculus, so we'll give it his name.

\begin{theorem}[Fermat's theorem for critical points]
  \label{thm:critical-points}
  \index{Fermat's theorem}\index{critical point!Fermat's theorem}
  Let $f$ be a function which has a local extremum at $p$.
  Then $p$ is a critical point of $f$.
\end{theorem}

We should take note here of a very important caveat to this theorem.
Every local extremum of $f$ is found at a critical point---but a function can have critical points which are \emph{not} extrema!
We'll consider this in more detail in \cref{gp:cp-not-extreme}.

What the theorem \emph{does} give us, however, is a powerful tool to \emph{start} looking for extrema of a function.
The domain of a function typically contains infinitely many points, so looking for the extrema \enquote{by hand} would literally take forever!
However, with \cref{thm:critical-points} in hand, we can restrict our search; extrema can \emph{only} occur at critical points, so we can start by finding those and then check each one to see if it's an extremum.

\subsection{Higher derivatives}
\label{sec:deriv.higher}

Suppose that $f$ is a differentiable function with $f' = g$.
It may be the case that $g$ is also differentiable; what is the relationship of $g'$ to $f$?

It turns out that this \enquote{second derivative} $g' = \pbrac*{f'}'$ of $f$ does encode important information about $f$.
Where the first derivative tells us about the rate of change of $f$, the second derivative tells us about how that rate of change is itself changing.
Graphically, this corresponds to the \enquote{concavity} of the plot of $y = f(x)$.
Physically, if a particle's position $p$ (in \si{\meter}) is a function of time $t$ (in \si{\second}), the derivative $\D{}{t} p$ measures the particle's velocity (in \si{\meter\per\second}) and the second derivative $\D{}{t} \D{}{t} p$ measures its acceleration (in \si{\meter\per\second\squared}).

This concept is important enough that we'll give it a name and a formal notation.

\begin{definition}
  \label{def:deriv.higher}
  Let $f$ be a differentiable function.
  If its derivative $f'$ is also differentiable, the derivative of $f'$ is the \defterm{second derivative}[] of $f$, denoted $f''$ or $\D[2]{}{x} f$.
  In this case, $f$ is \defterm{twice differentiable}[].

  Likewise, if $f$ is a twice-differentiable function and its second derivative $f''$ is differentiable, the derivative of $f''$ is the \defterm{third derivative} of $f$, denoted $f'''$ or $\D[3]{}{x} f$.
  In this case, $f$ is \defterm{thrice differentiable} or \defterm{three times differentiable}[].

  Continuing this process, if we can take $n$ successive derivatives of $f$ for some integer $n \geq 1$, the resulting function is the \defterm{$n$th derivative of $f$}[derivative!higher order], denoted $f^{(n)}$ or $\D[n]{}{x} f$.
  In this case, $f$ is \defterm{$n$ times differentiable}[differentiable function!n times differentiable@$n$ times differentiable].
  If $f$ is $n$ times differentiable for all integers $n$, $f$ is \defterm{infinitely differentiable}[differentiable function!infinitely differentiable] or \defterm{smooth}[smooth|see differentiable function!infinitely differentiable].
\end{definition}

% TODO: Add examples

\begin{gps}
  \begin{gp}
    \label{gp:cp-not-extreme}
    Find and classify the critical points of $f(x) = x^{4} - x^{3}$.
    Does this function have any local extrema?
    If so, where are they?
  \end{gp}
\end{gps}

\begin{exercises}
    \begin{exc}
    Fuel is pumped into a spherical tank at a constant rate.
    Let $V(t)$ be the volume of fuel in the tank at time $t$ and let $D(t)$ be the depth of the fuel in the tank at time $t$.
    \begin{enumerate}
    \item
      Give physical interpretations of the quantities $\D{V}{t}$ and $\D{D}{t}$.

    \item
      Is $\D{V}{t}$ positive, negative, or zero at the time that the tank is half full?

    \item
      Is $\D{D}{t}$ positive, negative, or zero at the time that the tank is half full?

    \item
      Is either of $\D{V}{t}$ or $\D{H}{t}$ constant?
    \end{enumerate}
  \end{exc}
\end{exercises}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../book/calcnotes.tex"
%%% End:
\documentclass[../book/calcnotes.tex]{subfiles}

\begin{document}
\section{Derivatives as functions}
\label{sec:derivs-as-functions}

The notion of \emph{derivative}, introduced in \cref{def:deriv}, gives us an analytic tool for studying the slopes of tangent lines to curves.
In particular, given a function $f$ and a value $x = a$, we now have a way to find the slope of the tangent line to the curve $y = f(x)$ at $x = a$.
Of course, the result can depend on the value of $a$ as well as on the function $f$, so in fact the derivative is a \emph{function} which is \enquote{derived from}\footnote{This is, in fact, the origin of the term \enquote{derivative}.} $f$.
We'll record this idea in a definition.

\begin{definition}
  \label{def:deriv.func}
  Fix a function $f$.
  The \emph{derivative function of $f$} (or \emph{derivative of $f$} for short) is the function $f'$ (read \enquote{$f$ prime}) given by
  \begin{equation}
    \label{eq:deriv.func}
    f'(x) = \lim_{\Delta x \to 0} \frac{f \pbrac{x + \Delta x} - f \pbrac{x}}{\Delta x}
  \end{equation}
  wherever the limit exists.
  If $f'$ exists on some region $I$, we say that $f$ is \emph{differentiable on $I$}; if $f'$ exists on the whole domain of $f$, we say that $f$ is \emph{differentiable}.
  For convenience, we will sometimes denote\footnotemark the derivative of $f$ by $\D{f}{x}$ or $\D{}{x} f$ instead of $f'$.
\end{definition}

\footnotetext{
  The \enquote{prime notation} $f'$ comes from Italian mathematician Joseph-Louis Lagrange; the \enquote{differential notation} $\D{f}{x}$ or $\D{}{x} f$ comes from German mathematician Gottfreid Leibniz.
  We will use them both throughout the text.
  Newton used a \enquote{dot notation} $\dot{f}$, but this is now rarely used outside a few scientific settings.
}

If we can find the derivative of a given function $f$, there will be an immediate payoff: we'll have calculated the slopes of \emph{all} the tangent lines to $y = f(x)$ at once!
In many cases, we'll need special techniques and careful analysis to find the derivatives of functions (which will occupy us for the rest of \cref{sec:derivative-theory}), but there are some functions we can tackle directly.

\begin{example}
  \label{ex:derivative.quadratic.function}
  Find the derivative of $f(x) = x^{2}$.
  Use the result to find the tangent line to $y = x^{2}$ at $x = 1$, $x = 2$, and $x = -3$.
\end{example}

\begin{soln}
  Recall that we already computed $f'(1)$ in \cref{ex:derivative.quadratic.onepoint}.
  To find $f'(x)$ as a function of $x$, we only need to retrace our steps, using $x$ instead of the specific value $x = 1$.
  By \cref{def:deriv.func}, the derivative is
  \begin{multline*}
    f'(x) = \lim_{\Delta x \to 0} \frac{\pbrac*{x + \Delta x}^{2} - \pbrac{x}^{2}}{\Delta x} \\
    = \lim_{\Delta x \to 0} \frac{x^{2} + 2 x \Delta x + \pbrac*{\Delta x}^{2} - x^{2}}{\Delta x} = \lim_{\Delta x \to 0} \frac{2 x \Delta x + \pbrac*{\Delta x}^{2}}{\Delta x} \\
    = \lim_{\Delta x \to 0} 2 x + \Delta x = 2x.
  \end{multline*}
  In differential notation, this result is
  \begin{equation*}
    \D{}{x} x^{2} = 2x.
  \end{equation*}
  We can translate this directly into tangent line information.
  At $x = 1$, the tangent line has slope $f'(1) = 2$; at $x = 2$, the tangent line has slope $f'(2) = 4$; and at $x = 3$, the tangent line has slope $f'(-3) = -6$.
  By \cref{thm:derivtan}, the tangent lines then have the following equations:
  \begin{gather*}
    y = f(1) + f'(1) \pbrac{x - 1} = 1 + 2 \pbrac{x - 1} \tag{x = 1} \\
    y = f(2) + f'(2) \pbrac{x - 2} = 4 + 4 \pbrac{x - 2} \tag{x = 2} \\
    y = f(-3) + f'(-3) \pbrac{x - -3} = 9 - 6 \pbrac{x + 3} \tag{x = -3}
  \end{gather*}
\end{soln}

This is our first application of the idea of a derivative function: for a given function $f$, the derivative function $f'$ tells us the slopes of \emph{all} the tangent lines to $y = f(x)$ at once!

\subsection{Rates of change}
\label{sec:deriv.roc}

All of this is great if, like the analytic geometers of sixteenth-century Europe, we want to draw tangent lines to curves.
However, we should take a moment to consider whether the concept of the derivative is of any other use.

Suppose, for example, that an object is moving back and forth in a straight line such that its position at time $t$ (in \si{\second}) is $x(t)$ (in \si{\meter}).
What does the number $x' \pbrac{1}$ measure?
Of course, we've already given one interpretation: it's the slope of the tangent line to\footnote{Note that this is a line in the $y$-$t$ plane! $x$ is the name of a \emph{function} here.} $y = x(t)$ at $t = 1$.
But does it tell us anything about the motion of the object itself?

In light of \cref{def:deriv}, we know that
\begin{equation*}
  x'(1) = \lim_{\Delta t \to 0} \frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}.
\end{equation*}
Let's disregard the limit for a moment and consider the numbers $\frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}$ for small (but non-zero!) values of $\Delta t$.
When $\Delta t = \SI{0.5}{\second}$, for example, this number is $\frac{x \pbrac*{\SI{1.5}{\second}} - x \pbrac*{\SI{1}{\second}}}{\SI{0.5}{\second}}$.
Without knowing more about the function $x$, of course, we can't calculate what number this is, but we can certainly say something about what it \emph{measures}: it's the average velocity of the object (in \si{\meter\per\second}) over the time interval $t \in \closedint{\SI{1}{\second}, \SI{1.5}{\second}}$!
Indeed, for any nonzero $\Delta t$ we choose, the number $\frac{x \pbrac*{1 + \Delta t} - x \pbrac{1}}{\Delta t}$ measures the average velocity of the object over the interval $t \in \closedint{\SI{1}{\second}, \pbrac*{1 + \Delta t} \si{\second}}$.
There's nothing special about the number $1$, of course, so this leads us to a general result: \emph{the derivative of a position function is a velocity function.}

In fact, we can generalize this interpretation far beyond mechanical motion.
Any time we are interested in the values of a function $f$, the values of the derivative function $f'$ measure the \emph{rate of change} of the values of $f$ with respect to the independent variable.
Here's just a few examples:

\begin{itemize}
\item
  If a cup of coffee set on a counter has temperature $T$ (in \si{\celsius}) at time $t$ (in \si{\minute}), the derivative $T'(t)$ measures the rate at which the coffee cools (in \si{\celsius\per\minute}).

\item
  If your browser has downloaded $S$ bytes of a file after $t$ seconds, the derivative $S'(t)$ measures the download throughput (in \si{\byte\per\second}).

\item
  If the cost of manufacturing $n$ computers is $C(n)$ U.S.~dollars, then $C'(n)$ is the \emph{marginal cost}, which measures the cost of producing a single computer given that $n$ have already been produced.
  (Notice that the independent variable doesn't have to be time!)

\item
  The pressure $P$ (in \si{\pascal}) on a diver is a function of the depth $d$ (in \si{\meter}) of the dive.
  The derivative $P'(d)$ measures how quickly the pressure increases as the diver descends.
\end{itemize}

This idea connects calculus to essentially every quantitative science, because it implies that differentiation is relevant to the study of anything that changes!
We'll revisit this idea down the road once we know how to find the derivatives of more functions.

\subsection{Derivatives of power functions}
\label{sec:deriv.polynomials}

Back in \cref{ex:derivative.quadratic.function}, we showed that $\D{}{x} x^{2} = 2x$.
What happens if we use a power other than $2$?

\begin{example}
  \label{ex:derivative.cubic.function}
  Find the derivative of $f(x) = x^{3}$.
\end{example}

\begin{soln}
  By \cref{def:deriv.func}, we compute
  \begin{multline*}
    f'(x) = \lim_{\Delta x \to 0} \frac{\pbrac*{x + \Delta x}^{3} - \pbrac*{x}^{3}}{\Delta x} \\
    = \lim_{\Delta x \to 0} \frac{x^{3} + 3 x^{2} \Delta x + 3 x \pbrac*{\Delta x}^{2} + \pbrac*{\Delta x}^{3} - x^{3}}{\Delta x} = \lim_{\Delta x \to 0} \frac{3 x^{2} \Delta x + 3x \pbrac*{\Delta x}^{2} + \pbrac*{\Delta x}^{3}}{\Delta x} \\
    = \lim_{\Delta x \to 0} 3x^{2} + 3 x \Delta x + \pbrac*{\Delta x}^{2} = 3x^{2}.
  \end{multline*}
  So $\D{}{x} x^{3} = 3x^{2}$.
\end{soln}

Of course, we could keep going---ideally, we'd like to compute the derivative of $f(x) = x^{n}$ for any $n$---but the algebra in the numerator is going to start getting pretty messy.
Fortunately, mathematicians of yore have done the heavy lifting for us by proving the following result:
\begin{lemma}
  \label{thm:diffofpowers}
  Let $a$ and $b$ be real numbers and $n$ be a positive integer.
  Then
  \begin{equation}
    \label{eq:diffofpowers}
    a^{n} - b^{n} = \pbrac*{a - b} \pbrac*{a^{n-1} + a^{n-2} b + a^{n-3} b^{2} + \dots + a^{2} b^{n-3} + a b^{n-2} + b^{n-1}}.
  \end{equation}
\end{lemma}

If we let $a = x + \Delta x$ and $b = x$, the left-hand side of \cref{eq:diffofpowers} looks very much like the numerator of the difference quotient that showed up in the calculation of $\D{}{x} x^{3}$.
What if we try to take the derivative of a general power function $f(x) = x^{n}$?
Again, following \cref{def:deriv.func}, we'll compute
\begin{align*}
  \D{}{x} x^{n} &= \lim_{\Delta x \to 0} \frac{\pbrac*{x + \Delta x}^{n} - \pbrac*{x}^{n}}{\Delta x}. \\
  \intertext{If we apply \cref{thm:diffofpowers} to the numerator, we can expand it, so}
  &= \lim_{\Delta x \to 0} \frac{\pbrac*{x + \Delta x - x} \pbrac*{\pbrac*{x + \Delta x}^{n-1} + \pbrac{x + \Delta x}^{n-2} x + \dots + \pbrac*{x + \Delta x} x^{n-2} + x^{n-1}}}{\Delta x} \\
  &= \lim_{\Delta x \to 0} \frac{\Delta x \cdot \pbrac*{\pbrac*{x + \Delta x}^{n-1} + \pbrac{x + \Delta x}^{n-2} x + \dots + \pbrac*{x + \Delta x} x^{n-2} + x^{n-1}}}{\Delta x} \\
  &= \lim_{\Delta x \to 0} \pbrac*{x + \Delta x}^{n-1} + \pbrac{x + \Delta x}^{n-2} x + \dots + \pbrac*{x + \Delta x} x^{n-2} + x^{n-1}.
  \intertext{Now we can take the limit by simply setting $\Delta x = 0$, so we conclude that}
  \D{}{x} x^{n} &= x^{n-1} + x^{n-2} \cdot x + \dots + x \cdot x^{n-2} + x^{n-1} \\
  &= n x^{n-1}.
\end{align*}

Of course, this calculation only makes sense if $n$ is a positive integer.
Ultimately, we'd like to be able to differentiate \emph{any} power function, but it turns out that we'll need more powerful machinery to do it.
Remarkably, it turns out that the same result holds!
We'll go ahead and record it here, then revisit the proof later when we have the tools to do it.

\begin{theorem}[Derivatives of power functions]
  \label{thm:deriv.power}
  Let $c$ be a real number.
  Then $f(x) = x^{c}$ is differentiable, and
  \begin{equation}
    \label{eq:deriv.power}
    \D{}{x} x^{c} = c x^{c-1}.
  \end{equation}
\end{theorem}

\subsection{Properties of derivatives}
\label{sec:derivprops}

So far, we have two tools to compute derivatives: \cref{def:deriv.func,thm:deriv.power}.
We'll calculate many more derivatives of specific functions in the coming sections.
Before we do, though, let's take a moment to think about the \emph{algebra} of differentiation.

\subsubsection{Constant multiples}
What happens, for example, if we take a derivative of a constant multiple of a function?
Let's think about this in terms of the geometry of tangent lines.
Suppose $f$ is a differentiable function.
The graphs of $y = f(x)$ and $y = 3f(x)$ are similar; the second is obtained from the first by \enquote{stretching} it vertically by a factor of $3$.
This will cause all the tangent lines to become three times steeper, suggesting that $\D{}{x} 3f(x) = 3 \D{}{x} f(x)$.

Will this kind of reasoning always work?
To check it formally, let's go to the algebra of \cref{def:deriv.func}.

\begin{example}
  \label{ex:deriv.constmult.alg}
  Let $f$ be a differentiable function.
  Compare $\D{}{x} 3f(x)$ to $\D{}{x} f(x)$ using \cref{def:deriv.func}.
\end{example}

\begin{soln}
  In light of \cref{def:deriv.func}, we compute
  \begin{multline*}
    \D{}{x} 3 f(x) = \lim_{\Delta x \to 0} \frac{\pbrac{3f} \pbrac{x + \Delta x} - \pbrac{3f} \pbrac{x}}{\Delta x} = \lim_{\Delta x \to 0} \frac{3 \pbrac*{f \pbrac*{x + \Delta x}} - 3 \pbrac*{f \pbrac{x}}}{\Delta x} \\
    = \lim_{\Delta x \to 0} \frac{3 \pbrac*{f \pbrac*{x + \Delta x} - f \pbrac*{x}}}{\Delta x}= 3 \lim_{\Delta x \to 0} \frac{f \pbrac*{x + \Delta x} - f \pbrac*{x}}{\Delta x} = 3 \D{}{x} f(x).
  \end{multline*}
  So $\D{}{x} 3 f(x) = 3 \D{}{x} f(x)$.
\end{soln}

And there we have it!
In fact, this exact same argument will work if we replace $3$ with any other constant real number.
Thus, we get our first algebraic result about derivatives.

\begin{theorem}[Constant multiple rule for derivatives]
  \label{thm:deriv.constmult}
  Let $f$ be a differentiable function and $k$ be a real number.
  Then
  \begin{equation}
    \label{eq:deriv.constmult}
    \D{}{x} k f(x) = k \D{}{x} f(x) = k f'(x).
  \end{equation}
\end{theorem}

\begin{example}
  \label{ex:deriv.cubic.bythm}
  Find $\D{}{x} 7 x^{12}$.
\end{example}

\begin{soln}
  By \cref{thm:deriv.power}, $\D{}{x} x^{12} = 12 x^{11}$.
  Thus, by \cref{thm:deriv.constmult}, $\D{}{x} 7 x^{12} = 7 \D{}{x} x^{12} = 7 \cdot 12 x^{11} = 84 x^{11}$.
\end{soln}

\subsubsection{Addition of functions}
Now suppose we want to compute the derivative of $f + g$ for differentiable functions $f$ and $g$.
This time, let's think in terms of rates of change.

Suppose a train is rolling through the countryside with position $T$ (in \si{\meter}) at time $t$ (in \si{\minute}) relative to the station.
Meanwhile, a conductor is walking down the aisle of the train, with position $C$ (in \si{\meter}) at time $t$ (in \si{\minute}) relative to the rear of the train.
How fast is the conductor moving relative to the ground?
Clearly her total velocity is equal to the sum of her speed down the aisle and the train's speed down the track, which is given by $C'(t) + T'(t)$.
But this velocity is also the rate of change of her \emph{position} relative to the station, which is given by $\D{}{t} \pbrac*{C(t) + T(t)}$.

Will this kind of reasoning always work?
Once again, we can check using the algebra of \cref{def:deriv.func}.

\begin{example}
  \label{ex:deriv.sum.alg}
  Let $f$ and $g$ be differentiable functions.
  Compare $\D{}{x} f(x) + g(x)$ to $\D{}{x} f(x)$ and $\D{}{x} g(x)$ using \cref{def:deriv.func}.
\end{example}

\begin{soln}
  In light of \cref{def:deriv.func}, we compute
  \begin{multline*}
    \D{}{x} f(x) + g(x) = \lim_{\Delta x \to 0} \frac{\pbrac{f + g} \pbrac*{x + \Delta x} - \pbrac{f + g} \pbrac*{x}}{\Delta x} \\
    = \lim_{\Delta x \to 0} \frac{f \pbrac*{x + \Delta x} + g \pbrac*{x + \Delta x} - f \pbrac{x} - g \pbrac{x}}{\Delta x} \\
    = \lim_{\Delta x \to 0} \frac{f \pbrac*{x + \Delta x} - f \pbrac{x}}{\Delta x} + \frac{g \pbrac*{x + \Delta x} - g \pbrac{x}}{\Delta x} = f'(x) + g'(x).
  \end{multline*}
  Thus, $\D{}{x} f(x) + g(x) = \D{}{x} f(x) + \D{}{x} g(x)$.
\end{soln}

And, once again, there we have it!
We should record this result for future reference.

\begin{theorem}[Sum rule for derivatives]
  \label{thm:deriv.sum}
  Let $f$ and $g$ be differentiable functions.
  Then
  \begin{equation}
    \label{eq:deriv.sum}
    \D{}{x} f(x) + g(x) = \pbrac*{\D{}{x} f(x)} + \pbrac*{\D{}{x} g(x)} = f'(x) + g'(x).
  \end{equation}
\end{theorem}

Taken together, \cref{thm:deriv.constmult,thm:deriv.sum} are sometimes called the \enquote{linearity theorem} for differentiation.

\subsubsection{Constant functions}
Now suppose we want to compute the derivative of a constant function (that is, a function $f$ such that $f(x) = k$ for all $x$).
This is easy enough to do directly, using \cref{def:deriv.func}:
\begin{equation*}
  \D{}{x} k = \lim_{\Delta x \to 0} \frac{k - k}{\Delta x} = \lim_{\Delta x \to 0} 0 = 0.
\end{equation*}

We can also interpret this result in terms of rates of change.
Suppose, for example, that the position of an object is constant---in other words, that the object never moves.
Clearly, its velocity is zero!

It turns out (although we won't have the tools to prove this for a while) that this result also works in the other direction---if a differentiable function $f$ has the property that $f'$ is the zero function, then $f$ must be a constant function.

Once again, we should record these ideas for future reference.
\begin{theorem}[Constant derivative theorem]
  \label{thm:deriv.const}
  Let $f$ be a differentiable function.
  Then $\D{}{x} f(x) = 0$ if and only if $f(x) = k$ for some constant $k \in \RR$.
\end{theorem}

If we take \cref{thm:deriv.sum,thm:deriv.constmult,thm:deriv.const} together, we can compute many derivatives.
For example, if we combine them with \cref{thm:deriv.power}, we can now find the derivative of any polynomial function!

\begin{example}
  \label{ex:deriv.polynomial}
  Let $f(x) = 3x^{4} - x^{3} + 12x^{2} - 4x + 3$.
  Find $f'(x)$.
\end{example}

\begin{soln}
  By \cref{thm:deriv.sum}, we can break up our derivative calculation over the $+$ signs:
  \begin{align*}
    \D{}{x} 3x^{4} - x^{3} + 12x^{2} - 4x + 3 &= \pbrac*{\D{}{x} 3x^{4}} + \pbrac*{\D{}{x} -x^{3}} + \pbrac*{\D{}{x} 12x^{2}} + \pbrac*{\D{}{x} -4x} + \pbrac*{\D{}{x} 3}. \\
    \intertext{\Cref{thm:deriv.constmult} tells us that we can \enquote{pull out} the constant factors from each of these derivatives:}
    &= 3 \pbrac*{\D{}{x} x^{4}} + \pbrac{-1} \pbrac*{\D{}{x} x^{3}} + 12 \pbrac*{\D{}{x} x^{2}} + \pbrac*{-4} \pbrac*{\D{}{x} x} + \pbrac*{\D{}{x} 3}. \\
    \intertext{Finally, we can use \cref{thm:deriv.power} and \cref{thm:deriv.const} to compute these derivatives.}
    &= 3 \cdot 4 x^{3} - 3 x^{2} + 12 \cdot 2 x^{1} - 4 x^{0} + 0 \\
    &= 12 x^{3} - 3x^{2} + 24 x - 4.
  \end{align*}
\end{soln}

\subsection{Higher derivatives}
\label{sec:deriv.higher}

Suppose that $f$ is a differentiable function with $f' = g$.
It may be the case that $g$ is also differentiable; what is the relationship of $g'$ to $f$?

It turns out that this \enquote{second derivative} $g' = \pbrac*{f'}'$ of $f$ does encode important information about $f$.
Where the first derivative tells us about the rate of change of $f$, the second derivative tells us about how that rate of change is itself changing.
Graphically, this corresponds to the \enquote{concavity} of the plot of $y = f(x)$, an idea we will explore further in \cref{sec:curve-sketching}.
Physically, if a particle's position $p$ (in \si{\meter}) is a function of time $t$ (in \si{\second}), the derivative $\D{}{t} p$ measures the particle's velocity (in \si{\meter\per\second}) and the second derivative $\D{}{t} \D{}{t} p$ measures its acceleration (in \si{\meter\per\second\squared}).

This concept is important enough that we'll give it a name and a formal notation.

\begin{definition}
  \label{def:deriv.higher}
  Let $f$ be a differentiable function.
  If its derivative $f'$ is also differentiable, the derivative of $f'$ is the \emph{second derivative} of $f$, denoted $f''$ or $\D[2]{}{x} f$.
  In this case, $f$ is \emph{twice differentiable}.

  Likewise, if $f$ is a twice-differentiable function and its second derivative $f''$ is differentiable, the derivative of $f''$ is the \emph{third derivative} of $f$, denoted $f'''$ or $\D[3]{}{x} f$.
  In this case, $f$ is \emph{thrice differentiable} or \emph{three times differentiable}.

  Continuing this process, if we can take $n$ successive derivatives of $f$ for some integer $n \geq 1$, the resulting function is the \emph{$n$th derivative} of $f$, denoted $f^{(n)}$ or $\D[n]{}{x} f$.
  In this case, $f$ is \emph{$n$ times differentiable}.
  If $f$ is $n$ times differentiable for all integers $n$, $f$ is \emph{infinitely differentiable} or \emph{smooth}.
\end{definition}

% TODO: Add examples

\begin{exercises}

\end{exercises}
\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../book/calcnotes.tex"
%%% End:
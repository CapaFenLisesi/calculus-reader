\ProvidesPackage{calcnotes}

%% LOAD PACKAGES

% Load AMS-LaTeX packages for math typesetting
\usepackage{amsfonts,amssymb,amsthm}
\usepackage{mathtools}

% Load COntent-Oriented LaTeX for semantic math
\usepackage{cool}

% Load SIUnitX for units handling
\usepackage{siunitx}

% Set up font handling
\usepackage[T1]{fontenc}
\usepackage{microtype}

% Use subfiles for chapter includes
\usepackage{subfiles}

% Use the Libertine font with math extensions
\usepackage{libertine}
\usepackage[libertine]{newtxmath}

% Use the Inconsolata font for monospace
\usepackage{inconsolata}

% Use the "Dutch calligraphic" alphabet from mathalfa
\usepackage[cal=dutchcal]{mathalfa}

% Load the csquotes package for semantic quotation marks
\usepackage{csquotes}

% Load the TikZ package for figures and diagrams
\usepackage{tikz}
\usepackage{pgfplots}

% Load the float package for fine-grained control over float placement
\usepackage{float}

% Load the fullwidth package for figures that span the margin
\usepackage{fullwidth}

% Load the booktabs package for professional-looking tables
\usepackage{booktabs}

% Load the listings package for code listings
\usepackage{listings}

% Load the hyperref package for hyperlinking (MUST BE LAST)
\usepackage{hyperref}

% Load the cleveref package for intelligent cross-referencing (MUST BE AFTER HYPERREF)
\usepackage[capitalize]{cleveref}

%% SET OPTIONS

% Configure listings
\lstset{
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\color{gray},
  numbers=left,
  breaklines=true,
  breakatwhitespace=true,
  numberstyle=\footnotesize,
  stepnumber=2,
  showstringspaces=false,
}

% Configure PGFPlots
\pgfplotsset{ % Define a common style, so we don't repeat ourselves
  rectify/.style={
    axis equal image, % Unit vectors of equal lengths in both directions
  },
  agdplot/.style={
    width = \textwidth,
    axis lines = middle, % Put axes at x=0, y=0
    axis line style = {-latex}, % Use LaTeX arrowheads
    smooth, % Smooth all curves
    samples = 100, % A decent default for most curves
    area style, % Fill regions bounded by \closedcycle
    scale only axis, % Fit axes to size rather than fiddling with labels
  },
}

% Configure cleveref
\crefname{lstlisting}{listing}{listings}
\Crefname{lstlisting}{Listing}{Listings}
\crefname{equation}{equation}{equations}

% Configure theorem styles
\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{observation}[theorem]{Observation}

\newtheorem*{theorem*}{Theorem}
\newtheorem*{corollary*}{Corollary}
\newtheorem*{lemma*}{lemma}
\newtheorem*{proposition*}{Proposition}
\newtheorem*{observation*}{Observation}

\newtheorem*{motprob}{Problem}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem*{definition*}{Definition}

\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem*{remark*}{Remark}

\newtheorem{example}[theorem]{Example}
\newtheorem*{example*}{Example}

\newtheorem*{motex}{Motivating example}

\newtheorem{note}[theorem]{Note}
\newtheorem*{note*}{Note}

\newtheorem*{solution}{Solution}

% Use roman d for differentiation and integration
\Style{DSymb={\mathrm d},DShorten=true,IntegrateDifferentialDSymb=\mathrm{d}}

% Use fancy paired delimiters
\DeclarePairedDelimiter{\pbrac}{(}{)}
\DeclarePairedDelimiter{\sbrac}{[}{]}
\DeclarePairedDelimiter{\cbrac}{\{}{\}}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}

\DeclarePairedDelimiter{\closedint}{[}{]}

% Add some imperial units
\DeclareSIUnit{\foot}{ft}
\DeclareSIUnit{\inch}{in}
\DeclareSIUnit{\mile}{mi}

% Commands for names of important fields
\newcommand*{\fieldname}[1]{\ensuremath{\mathbf{#1}}}
\newcommand*{\RR}{\fieldname{R}}
\newcommand*{\QQ}{\fieldname{Q}}
\newcommand*{\CC}{\fieldname{C}}

% Area function from integral calculus
\newcommand*{\areafunc}[3]{\ensuremath{A_{{#1},{#2}} \pbrac*{#3}}}

%% CONFIGURE LAYOUT

% Set up title page
\setlength{\droptitle}{1in}

\newcommand{\subtitle}[1]{\gdef\thesubtitle{#1}}

\renewcommand{\maketitle}{
  \thispagestyle{empty}
  \vspace*{\stretch{4}}
  \begin{flushright}
    \textsf{\textbf{\HUGE\thetitle}} \\[\baselineskip]
    \textsf{\textit{\Huge\thesubtitle}}
  \end{flushright}
  \vspace*{\stretch{1}}
  \begin{flushright}
    \textsf{\Large\theauthor}
  \end{flushright}
  \vspace*{\stretch{9}}
  \cleardoublepage
}

% Next, we configure the chapter style
\definecolor{chaptercolor}{gray}{0.8}
% helper macros
\newcommand\numlifter[1]{\raisebox{-2cm}[0pt][0pt]{\smash{#1}}}
\newcommand\numindent{\kern37pt}
\newlength\chaptertitleboxheight
\makechapterstyle{hansen}{
  \renewcommand\printchaptername{\raggedleft}
  \renewcommand\printchapternum{%
    \begingroup%
    \leavevmode%
    \chapnumfont%
    \strut%
    \numlifter{\thechapter}%
    \numindent%
    \endgroup%
  }
  \renewcommand
  *
  {\printchapternonum}{%
    \vphantom{\begingroup%
      \leavevmode%
      \chapnumfont%
      \numlifter{\vphantom{9}}%
      \numindent%
      \endgroup}
    \afterchapternum}
  \setlength\midchapskip{0pt}
  \setlength\beforechapskip{0.5\baselineskip}
  \setlength{\afterchapskip}{3\baselineskip}
  \renewcommand\chapnumfont{%
    \fontsize{4cm}{0cm}%
    \bfseries%
    \sffamily%
    \color{chaptercolor}%
  }
  \renewcommand\chaptitlefont{%
    \normalfont%
    \huge%
    \bfseries%
    \raggedleft%
  }%
  \settototalheight\chaptertitleboxheight{%
    \parbox{\textwidth}{\chaptitlefont \strut bg\\bg\strut}}
  \renewcommand\printchaptertitle[1]{%
    \parbox[t][\chaptertitleboxheight][t]{\textwidth}{%
      % \microtypesetup{protrusion=false}% add this if you use microtype
      \chaptitlefont\strut ##1\strut}%
  }
}
\chapterstyle{hansen}

% Next, we configure the page style
\pagestyle{companion}

% Memoir only numbers down to sections by default. We need to go deeper.
\setsecnumdepth{subsubsection}

% Add some space to the outer margin for marginalia
\addtolength{\textwidth}{-.1\textwidth}
\addtolength{\foremargin}{.1\textwidth}
\setlength{\marginparsep}{2eM}
\checkandfixthelayout

\newlength{\marginwidth}
\setlength{\marginwidth}{\marginparsep+\marginparwidth}

\newlength{\blockwidth}
\setlength{\blockwidth}{\marginwidth+\textwidth}

\fullwidthsetup{width=\blockwidth, outermargin=-\marginwidth}

% Use small font for captions
\captionnamefont{\tiny}
\captiontitlefont{\tiny}

% Configure an environment for full-block figures
\newenvironment*{widefig}[1][htbp]{
  \begin{figure}[{#1}]
    % \begin{adjmulticols*}{1}{0in}{-\marginparwidth}
    %\checkoddpage
    %\edef\side{\ifoddpage l\else r\fi}
    %\begin{\minipage}[\side]{\fullwidth}
    \begin{fullwidth}[width=\blockwidth]
    }{
    \end{fullwidth}
    %\end{minipage}
    % \end{adjmulticols*}
  \end{figure}
}

\newenvironment*{smallfig}{
  \begin{marginfigure}
    \centering
  }{
  \end{marginfigure}
}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "book/calcnotes.tex"
%%% End: